<p-dialog [(visible)]="display"
          [modal]="true"
          header="{{ 'OrganizationManagement.Connector Secret' | translate }}"
          (onHide)="close()"
          [style]="{width:'25rem'}">

    <!-- Ask for token requirement -->
    <ng-container *ngIf="stage === 'confirm'">
        <p class="mb-4">
            {{ 'OrganizationManagement.GenerateConnectorSecretQuestion' | translate }}
        </p>

        <div class="flex justify-content-between">
            <button pButton class="p-button-secondary"
                    (click)="onNo()"  label="{{ 'No'  | translate }}"></button>
            <button pButton (click)="onYesGenerate()"
                    [disabled]="loading"
                    label="{{ 'Yes' | translate }}"></button>
        </div>
    </ng-container>

    <!-- loading spinner -->
    <div class="flex justify-content-center my-4" *ngIf="loading">
        <p-progressSpinner></p-progressSpinner>
    </div>

    <!-- Display token -->
    <ng-container *ngIf="stage === 'token' && !loading">
        <label class="font-bold d-block mb-2">
            {{ 'OrganizationManagement.Connector Secret' | translate }}
        </label>

        <span class="p-input-icon-right w-full mb-4">
            <input pInputText class="w-full" [readonly]="true" [value]="token">
            <i class="pi pi-copy cursor-pointer" (click)="copyToken()"></i>
        </span>

        <div class="flex justify-content-end">
            <button pButton (click)="close()" label="{{ 'Close' | translate }}"></button>
        </div>
    </ng-container>
</p-dialog>
